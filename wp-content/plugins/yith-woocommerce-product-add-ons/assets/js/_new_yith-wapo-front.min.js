function yith_wapo_replace_image(e){var a=".woocommerce-product-gallery .woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image:first-child img";a+=", .yith_magnifier_zoom img, .yith_magnifier_zoom_magnifier",a+=", .owl-carousel .woocommerce-main-image",a+=", .woocommerce-product-gallery__image .wp-post-image";var i=".yith_magnifier_zoom_magnifier, .zoomWindowContainer .zoomWindow";if(void 0!==e.data("replace-image")&&""!=e.data("replace-image")){var t=e.data("replace-image");void 0===jQuery(a).attr("wapo-original-img")&&(jQuery(a).attr("wapo-original-img",jQuery(a).attr("src")),jQuery(i).attr("wapo-original-img",jQuery(i).css("background-image").slice(4,-1).replace(/"/g,""))),jQuery(a).attr("src",t),jQuery(a).attr("srcset",t),jQuery(i).css("background-image","url("+t+")"),jQuery("#yith_wapo_product_img").val(t)}else if(void 0!==jQuery(a).attr("wapo-original-img")){var o=jQuery(a).attr("wapo-original-img"),r=jQuery(i).attr("wapo-original-img");jQuery(a).attr("src",o),jQuery(a).attr("srcset",o),jQuery(i).css("background-image","url("+r+")")}}function yith_wapo_check_required_fields(e){var a=!1,i=!1;return jQuery("form.cart input, form.cart select").each(function(){!jQuery(this).attr("required")||""!=jQuery(this).val()&&"Required"!=jQuery(this).val()||("highlight"==e&&(jQuery(this).css("border","1px solid #f00"),jQuery(this).parent().find(".yith-wapo-ajax-uploader").css("border","1px dashed #f00"),jQuery(this).parent().find(".yith-wapo-ajax-uploader").css("background-color","#fee"),jQuery(this).parent().find(".required-error").css("display","block")),i=!0,a=!0)}),"hide"==e&&(i?jQuery(".single_add_to_cart_button").hide():jQuery(".single_add_to_cart_button").fadeIn()),!a}function yith_wapo_conditional_logic_check(){jQuery("form.cart .yith-wapo-addon.conditional_logic").each(function(){for(var e=!0,a=!1,i=(jQuery(this).data("addon_id"),jQuery(this).data("conditional_logic_display")),t=jQuery(this).data("conditional_logic_display_if"),o=String(jQuery(this).data("conditional_rule_addon")).split("|"),r=String(jQuery(this).data("conditional_rule_addon_is")).split("|"),n=0;n<o.length;n++){var d=o[n].split("-"),p=!1,c=!1;if("v"==d[0])jQuery(".variation_id").val()==d[2]&&(c=!0);else if(void 0!==d[1]){c=jQuery("#yith-wapo-"+d[0]+"-"+d[1]).is(":checked")||jQuery("select#yith-wapo-"+d[0]).val()==d[1];var s=jQuery("input#yith-wapo-"+d[0]+"-"+d[1]).val(),l=jQuery("textarea#yith-wapo-"+d[0]+"-"+d[1]).val();p=void 0!==s&&""!==s||void 0!==l&&""!==l}else c=jQuery("#yith-wapo-addon-"+o[n]+" input:checkbox:checked").length>0||jQuery("#yith-wapo-addon-"+o[n]+" input:radio:checked").length>0||jQuery("#yith-wapo-addon-"+o[n]+" option:selected").length>0;"selected"==r[n]?c?a=!0:e=!1:"not-selected"==r[n]?c?e=!1:a=!0:"empty"==r[n]?p?e=!1:a=!0:"not-empty"==r[n]&&(p?a=!0:e=!1)}"all"==t&&e?"show"==i?jQuery(this).fadeIn():jQuery(this).fadeOut():"any"==t&&a?"show"==i?jQuery(this).fadeIn():jQuery(this).fadeOut():"show"==i?jQuery(this).fadeOut():jQuery(this).fadeIn()})}function yith_wapo_ajax_upload_file(e,a,i){return jQuery.ajax({url:ajaxurl,type:"POST",contentType:!1,processData:!1,data:e,success:function(e){var t=i.parent();t.find(".yith-wapo-ajax-uploader").hide();var o=parseFloat(a.size/1024/1024).toFixed(2)+" MB",r=e.replace(/^.*[\\\/]/,"");t.find(".yith-wapo-uploaded-file .info").html(r+"<br />"+o),t.find(".yith-wapo-uploaded-file").fadeIn(),t.find("input.option").val(e).change()},error:function(e){}}),!1}function yith_wapo_check_min_max(e,a=!1){var i=e.data("min"),t=e.data("max"),o=e.data("exa"),r=e.find("input:checkbox:checked").length;if(o>0){if(o!=r){var n=0;return a&&(n=o-r,e.addClass("required-min"),e.find(".min-error").show(),1==n?e.find(".min-error-an, .min-error-option").show():(e.find(".min-error-qty, .min-error-options").show(),e.find(".min-error-qty").text(n))),e.find("input:checkbox").not(":checked").attr("disabled",!1),n}e.removeClass("required-min"),e.find(".min-error, .min-error span").hide(),e.find("input:checkbox").not(":checked").attr("disabled",!0)}else if(t>0&&(t>r?e.find("input:checkbox").not(":checked").attr("disabled",!1):e.find("input:checkbox").not(":checked").attr("disabled",!0)),i>0){n=0;return i<=r?(e.removeClass("required-min"),e.find(".min-error, .min-error span").hide()):(n=i-r,a&&(e.addClass("required-min"),e.find(".min-error").show(),1==n?e.find(".min-error-an, .min-error-option").show():(e.find(".min-error-qty, .min-error-options").show(),e.find(".min-error-qty").text(n)))),n}}function yith_wapo_check_multiplied_price(e){var a=e.data("price"),i=e.data("default-price");!i>0&&(i=a,e.data("default-price",i));var t=e.data("price-type");e.data("price-method");"multiplied"==t&&e.data("price",e.val()*i)}jQuery("body").on("change",".yith-wapo-addon-type-checkbox input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-color input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-label input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-product input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-radio input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-select select",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),yith_wapo_replace_image(jQuery(this).find("option:selected"))}),jQuery(document).on("click",".yith-wapo-addon.toggle .wapo-block-title",function(){jQuery(this).parent().find(".options").toggle("fast"),jQuery(document).trigger("yith_proteo_inizialize_html_elements")}),jQuery(function(){yith_wapo_conditional_logic_check()}),jQuery("form.cart .yith-wapo-addon").on("change","*",function(){yith_wapo_conditional_logic_check()}),jQuery("form.cart").on("yith-wapo-reload-addons",function(e,a=""){jQuery("#yith-wapo-container").css("opacity","0.5");var i={action:"live_print_blocks",addons:jQuery("form.cart").serializeArray()};return""!=a&&(i.price=a),jQuery.ajax({url:ajaxurl,type:"post",data:i,success:function(e){jQuery("#yith-wapo-container").html(e),yith_wapo_conditional_logic_check(),jQuery("#yith-wapo-container").css("opacity","1")}}),!1}),jQuery("form.cart").on("change",".variations",function(){jQuery("form.cart").trigger("yith-wapo-reload-addons")}),jQuery("form.cart").on("change","#price_calculator",function(){var e=jQuery("#price_calculator .product_price .amount").text().replace(",",".");e=e.replace(/[^0-9\.-]+/g,""),jQuery("form.cart").trigger("yith-wapo-reload-addons",[e])}),jQuery("html").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("html").on("drop",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(".yith-wapo-ajax-uploader").on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","0.5")}),jQuery(".yith-wapo-ajax-uploader").on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),jQuery(".yith-wapo-ajax-uploader").on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","1")}),jQuery(".yith-wapo-ajax-uploader").on("drop",function(e){e.stopPropagation(),e.preventDefault();var a=jQuery(this).parent().find("input.file"),i=e.originalEvent.dataTransfer.files[0],t=new FormData;t.append("action","upload_file"),t.append("file",i),wapo_upload_allowed_file_types.includes(i.name.split(".").pop())?i.size<=1024*wapo_upload_max_file_size*1024?yith_wapo_ajax_upload_file(t,i,a):alert("Error: max file size "+wapo_upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),jQuery("#yith-wapo-container").on("click",".yith-wapo-ajax-uploader .button, .yith-wapo-ajax-uploader .link",function(){jQuery(this).parent().parent().find("input.file").click()}),jQuery("#yith-wapo-container").on("change",".yith-wapo-addon-type-file input.file",function(){var e=jQuery(this),a=jQuery(this)[0].files[0],i=new FormData;i.append("action","upload_file"),i.append("file",a),wapo_upload_allowed_file_types.includes(a.name.split(".").pop())?a.size<=1024*wapo_upload_max_file_size*1024?yith_wapo_ajax_upload_file(i,a,e):alert("Error: max file size "+wapo_upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),jQuery("#yith-wapo-container").on("click",".yith-wapo-uploaded-file .remove",function(){jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".yith-wapo-ajax-uploader").fadeIn(),jQuery(this).parent().parent().find("input").val(""),jQuery(this).parent().parent().find("input.option").change()}),jQuery("form.cart").on("click","span.checkboxbutton",function(){jQuery(this).find("input").is(":checked")?jQuery(this).addClass("checked"):jQuery(this).removeClass("checked")}),jQuery("form.cart").on("click","span.radiobutton",function(){jQuery(this).find("input").is(":checked")&&(jQuery(this).parent().parent().parent().find("span.radiobutton.checked").removeClass("checked"),jQuery(this).addClass("checked"))}),jQuery(".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product").each(function(){yith_wapo_check_min_max(jQuery(this))}),jQuery(".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product").on("change",function(){yith_wapo_check_min_max(jQuery(this))}),jQuery("form.cart").submit(function(){if(!yith_wapo_check_required_fields("highlight"))return!1;console.log("SUBMIT");var e=0;return jQuery(this).find(".yith-wapo-addon").each(function(){e+=yith_wapo_check_min_max(jQuery(this),!0)}),!(e>0)&&void 0}),jQuery(".yith-wapo-addon-type-number").on("change","input",function(){yith_wapo_check_multiplied_price(jQuery(this))});